<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">
  
  <!-- Import all Gazebo-customization elements, including Gazebo colors -->
  <!-- <xacro:include filename="iiwa.gazebo.xacro" /> -->
  <!-- Import Transmissions -->
  <!-- <xacro:include filename="iiwa.transmission.xacro" /> -->
  <!-- Include Utilities -->
  <!-- <xacro:include filename="utilities.xacro" /> -->
  <!-- <xacro:include filename="materials.xacro" /> -->
  <!-- some constants -->
  <xacro:property name="safety_controller_k_pos" value="100" />
  <xacro:property name="safety_controller_k_vel" value="2" /> 
  <xacro:property name="joint_damping" value="0.0" />
  
  <xacro:macro name="KUKAiiwa14" params="robot_name *origin">
    
    <!--joint between WORLD and BASE-->
    <!-- <joint name="A0" type="fixed">
      <xacro:insert_block name="origin"/>
      <parent link="world"/>
      <child link="iiwa_base"/>
    </joint> -->
    

    <!-- BASE -->
    <link name="iiwa_base">
      <inertial>
        <origin xyz="0.00000 0.00000 0.00000"/>
        <mass value="8.00000"/>
        <inertia ixx="0.00095" iyy="0.00133" izz="0.00118" ixy="0.00000" ixz="-0.00000" iyz="-0.00006"/>
      </inertial>

      <visual>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />            
        <geometry>
        <mesh>
          <uri>package://meshes/stl/iiwa_base.stl</uri>
          <scale>0.001 0.001 0.001</scale>
        </mesh>
        </geometry>
        <!-- <material name="Grey"/> -->
      </visual>   

      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
        <mesh>
          <uri>package://meshes/stl/iiwa_base.stl</uri>
          <scale>0.001 0.001 0.001</scale>
        </mesh>        </geometry>
        <!-- <material name="Grey"/> -->
      </collision>

      <!-- <self_collision_checking>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <capsule radius="0.15" length="0.25"/>
        </geometry>
      </self_collision_checking> -->
    </link>
    

    <!-- joint between base and link1 -->
    <joint name="A1" type="revolute">
      <origin xyz="0.00000 0.00000 0.15750" rpy="0.0 0.0 0.0"/>
      <parent link="iiwa_base"/>
      <child  link="L1"/>
      <limit effort="30" velocity="1.0"/>
      <axis xyz="0 0 1"/>
      <limit lower="-2.96706" upper="2.96706" velocity="1.48353" effort="320"/>
      <!-- <safety_controller soft_lower_limit="${-168 * PI / 180}"
                          soft_upper_limit="${168 * PI / 180}"
                          k_position="${safety_controller_k_pos}"
                          k_velocity="${safety_controller_k_vel}"/> 
      <dynamics damping="${joint_damping}"/> -->
    </joint>
    
  </xacro:macro>
  
</robot>